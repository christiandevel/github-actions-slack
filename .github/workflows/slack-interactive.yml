name: Slack Interactive Scoreboard
on:
  push:
    branches:
      - main
  workflow_dispatch:
    inputs:
      trigger_quiz:
        description: 'Do you want to trigger the quiz?'
        required: true
        default: 'yes'
jobs:
  slack-interactive:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        
      - name: Get Questions
        run: |
          QUESTION=$(shuf -n 1 ./questions.yml | cut -d '-' -f2-)
          echo "QUESTION=$QUESTION" >> $GITHUB_ENV
          echo $QUESTION
    
      - name: Slack Notification
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_MESSAGE: We have a new question: ${{ env.QUESTION }}
          SLACK_TITLE: Quiz
          SLACK_COLOR: good
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}